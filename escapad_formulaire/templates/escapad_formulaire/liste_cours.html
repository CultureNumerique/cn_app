<!-- Template for listing the user's course -->

{% extends "app_cours.html" %}

{%  load static %}

{% block breadcrumb %}
  <li><a href="{% url 'mes_cours' %}"><span> Mes cours</span></a></li>
{% endblock %}


{% block content %}
  <h1>Mes cours</h1>

  {% if user.is_authenticated %}

    <table>
      <tr>
        <th>Nom du cours</th>
        <th>Nombre Modules</th>
        <th>Contributeurs</th>
        <th>Modification</th>
        <th>Suppression</th>
      </tr>
    {% for cours in profil.cours.all %}
      <tr>
        <td>{{ cours.nom_cours }}</td>
        <td>{{ cours.module_set.all.count}} Module(s) </td>
        <td>{{ cours.profil_set.all.count }} Contributeur(s) </td>
        <td><a href="{% url 'cours' cours.id_cours %}">Voir le cours</a></td>
        <td><a href="{% url 'delete_course' cours.id_cours %}">Supprimer le cours</a></td>

      </tr>
    {% endfor %}
    </table>

    <br>

    <div class="container">
      <div class="row">
        <div class="col-md-5">
          <!-- Form for creating a new course -->
          <form action="{% url 'mes_cours' %}" method="post"  enctype="multipart/form-data">
              {% csrf_token %}
              <fieldset id="home">
                <legend>Créer un nouveau cours</legend>
                {{ form.as_p}}
              </fieldset>

              <input type="submit" value="Commencer à créer" />

              <button type="button" class="popup" onclick="showPopUp('popup1')">
                <img src="{% static 'img/help.png' %}" height="20" width="20"/>
                <span class="popuptext" id="popup1">
                  Générer un nouveau cours:<br>
                  Un cours dispose d'un ensemble de module et une page d'accueil. <br>
                  Il est possible de partager le cours à d'autres utilisateurs, <br>
                  et également de l'écrire en simultané.
                </span>
              </button>

          </form>
        </div>
        <div class="col-md-5">
          <!-- Display the errors -->
          <ul>
          {% for erreur in erreurs %}
            <li>{{erreur}}</li>
          {% endfor %}
          </ul>

          <!-- Reupload form -->
          <form action="{% url 'mes_cours' %}" method="post"  enctype="multipart/form-data">
              {% csrf_token %}
              <fieldset>
                <legend>Réuploader un cours sur la plateforme</legend>
                {{ form2.as_p}}
              </fieldset>

              <input type="submit" value="Submit" />
              <button type="button" class="popup" onclick="showPopUp('popup2')">
                <img src="{% static 'img/help.png' %}" height="20" width="20"/>
                <span class="popuptext" id="popup2">
                  Réuploader un cours sur la plateforme:<br>
                  Veuillez insérer l'archive export.tar.gz fournie <br>
                  lors de la génération du site.
                </span>
              </button>
          </form>
        </div>
      </div>
    </div>





    <a href="{% url 'mes_cours' %}"><button>Retour à mes cours</button></a>




  {% else %}
  <p> Vous n'êtes pas censé avoir accès à cette page, veuillez vous connecter !</p>
  {% endif %}

{% endblock %}
