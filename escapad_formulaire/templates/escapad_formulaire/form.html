<!--
Upload Course with forms Template
Reference to a js file making DOM manipulation, in order to add dynamically new modules.
-->

{% extends "app_hors_ligne.html" %}

{% block titre %}Formulaire{% endblock %}

{% block script %}

{%  load static %}
<script type="text/javascript" src="{% static 'js/form_dom.js' %}"></script>
{% endblock %}

{% block breadcrumb %}
  <li><a href="{% url 'form_upload' %}"><span> Upload via formulaire</span></a></li>
{% endblock %}

{% block content %}

  <div class="container">
    <div class="row">
      <div class="col-md-5 ">
        <h2>Upload élément par élément</h2>

        <form action="{% url 'form_upload' %}" method="post"  enctype="multipart/form-data">

            {% csrf_token %}
            <fieldset>
              <legend>Informations générales</legend>
              {{ form.as_p}}
            </fieldset>

            <div id="modules">
              <fieldset id="module1">
                <legend>Module 1</legend>
                {{formMod.as_p}}
              </fieldset>
            </div>

            <input type="submit" value="Générer le cours" />
            <input type="button" value="Ajouter un module" onclick="createModule()">
            <input type="button" value="Retirer un module" onclick="removeModule()">

            <button type="button" class="popup" onclick="showPopUp('popup3')">
              <img src="{% static 'img/help.png' %}" height="20" width="20"/>
              <span class="popuptext" id="popup3">Chaque module doit être écrit en Markdown/Gift.<br>
                Pour chaque module, On peut insérer des medias.<br>
                Les medias doivent être dans une archive zip ou tar.gz à la racine.<br><br>
                Référence dans les modules:
                <br>![blabla](media/&lt;nom fichier&gt;)
              </span>
            </button><br>

            <input id="nb_module" name="nb_module" type="hidden" value="1"/>
        </form>
      </div>
      <div class="col-md-7 ">
        <ul>
          {% for erreur in erreurs %}
            <li>{{erreur}}</li>
          {% endfor %}
        </ul>

        <h2>Upload d'une archive</h2>

        <form action="{% url 'form_upload' %}" method="post"  enctype="multipart/form-data">
            {% csrf_token %}
            <fieldset>
              <legend>Archive du cours</legend>
              {{ form2.as_p}}
            </fieldset>

            <input type="submit" value="Submit" />
            <span><b>/!\ Veillez à bien respecter l'architecture!</b></span>
            
        </form>
      </div>
    </div>
  </div>





{% endblock %}
